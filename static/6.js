webpackJsonp([6],{462:function(n,t,i){"use strict";function e(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(41),s=e(o),h=i(3),r=e(h),A=i(19),d=e(A),a=i(2),c=e(a);t.default={title:"初始化工作框",name:"Init",data:function(){return{loading_text:"正在对机器进行初始化操作,请稍等",dots:"",timeOut:void 0,timeIndex:0,errorShow:!1}},ready:function(){this.start()},props:{hideHead:!1},methods:{isAndroidDevice:function(){try{HostApp,this.$AndroidPlugin.isAndroid=!0,c.default.ProxyUrl=this.$AndroidPlugin.getProxyURL()}catch(n){console.log("PC测试环境"),c.default.AndroidPlugin.isAndroid=!1,c.default.ProxyUrl=""}},back:function(){this.$back()},getSn:function(){this.Sn=this.$AndroidPlugin.getSN(),c.default.PosUtil.Sn=this.Sn},home:function(){this.$AndroidPlugin.back_home()},addDots:function(){this.timeIndex++,this.dots+="."},clearThisInterval:function(){window.clearInterval(this.timeOut),this.initDots()},initDots:function(){this.timeIndex=0,this.dots=""},start:function(){function n(){return t.apply(this,arguments)}var t=(0,d.default)(r.default.mark(function n(){return r.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.isAndroidDevice();case 2:return n.next=4,this.getSn();case 4:this.errorShow=!1,this.loading_text="正在进行初始化操作,请稍等...",this.timeOut=window.setInterval(this.setTimeOutMethod,1e3),l(this);case 8:case"end":return n.stop()}},n,this)}));return n}(),setTimeOutMethod:function(){this.timeIndex>=3?this.initDots():this.addDots()}}};var l=function(n){console.log("传的数据",n.$PosUtil.Sn),n.$resetpost(c.default.ProxyUrl+"/rs/logic/getConfigParam",{data:{device_num:n.$PosUtil.Sn}},{resolveMsg:null,rejectMsg:null}).then(function(t){n.loading_text="初始化成功",n.clearThisInterval(),(0,s.default)(n.$PosUtil.posParam,t.data),n.$goto("main",{},"self")}).catch(function(t){console.log("res.status:",t.status),501===t.status?n.loading_text="该设备未注册，请注册后点击重试":404===t.status?n.loading_text="设备网络故障或连接服务器异常":500===t.status?n.loading_text="服务器内部错误":n.loading_text="未知错误",n.errorShow=!0,n.clearThisInterval()})}},762:function(n,t,i){t=n.exports=i(74)(),t.push([n.id,".span-height-center{position:relative;top:35%}.text-style{font-size:30px;color:#000;font-weight:bolder}.div-height10{height:10%}.div-height20{height:20%}.div-height30{height:30%}.div-height40{height:40%}.div-height50{height:50%}.div-height60{height:60%}.div-height70{height:70%}.div-height80{height:80%}.div-height90{height:90%}.div-height100{height:100%}.loading-text-style{margin:0 10%;height:30%;border-radius:10px;text-align:center}.InitErrorBtn{width:150px;height:60px;font-size:20px}.ErrorBtnLocation{position:relative;height:0%}","",{version:3,sources:["/./src/components/Init.vue"],names:[],mappings:"AA+IA,oBACE,kBAAmB,AACnB,OAAS,CACV,AAED,YACE,eAAgB,AAChB,WAAa,AACb,kBAAoB,CACrB,AAED,cACE,UAAW,CACZ,AAED,cACE,UAAW,CACZ,AAED,cACE,UAAW,CACZ,AAED,cACE,UAAW,CACZ,AAED,cACE,UAAW,CACZ,AAED,cACE,UAAW,CACZ,AAED,cACE,UAAW,CACZ,AAED,cACE,UAAW,CACZ,AAED,cACE,UAAW,CACZ,AAED,eACE,WAAY,CACb,AAED,oBACE,aAAwB,AACxB,WAAY,AACZ,mBAAoB,AACpB,iBAAkB,CACnB,AAED,cACE,YAAa,AACb,YAAa,AACb,cAAgB,CACjB,AAED,kBACE,kBAAmB,AACnB,SAAW,CACZ",file:"Init.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.span-height-center {\n  position: relative;\n  top: 35%;\n}\n\n.text-style {\n  font-size: 30px;\n  color: black;\n  font-weight: bolder;\n}\n\n.div-height10 {\n  height: 10%\n}\n\n.div-height20 {\n  height: 20%\n}\n\n.div-height30 {\n  height: 30%\n}\n\n.div-height40 {\n  height: 40%\n}\n\n.div-height50 {\n  height: 50%\n}\n\n.div-height60 {\n  height: 60%\n}\n\n.div-height70 {\n  height: 70%\n}\n\n.div-height80 {\n  height: 80%\n}\n\n.div-height90 {\n  height: 90%\n}\n\n.div-height100 {\n  height: 100%\n}\n\n.loading-text-style {\n  margin: 0px 10% 0px 10%;\n  height: 30%;\n  border-radius: 10px;\n  text-align: center\n}\n\n.InitErrorBtn {\n  width: 150px;\n  height: 60px;\n  font-size: 20px;\n}\n\n.ErrorBtnLocation {\n  position: relative;\n  height: 0%;\n}\n"],sourceRoot:"webpack://"}])},793:function(n,t,i){var e=i(762);"string"==typeof e&&(e=[[n.id,e,""]]);i(134)(e,{});e.locals&&(n.exports=e.locals)},911:function(n,t){n.exports=' <div> <div class=mhead v-if=!hideHead> <ul> <li> <text>自助缴费机</text> </li> </ul> </div> <div class=loadview> <div class=auto> <div class=loading-text-style> <span class="text-style span-height-center">{{loading_text}}{{dots}}</span> </div> <div class=ErrorBtnLocation> <button class="InitErrorBtn btn btn-danger" v-if=errorShow @click=start>重试</button> </div> </div> </div> <div class=foot v-if=!hideHead @click=home()> <text>退出</text> </div> <div class=foot v-if=hideHead @click=back()> <text>返回</text> </div> </div> '},1035:function(n,t,i){var e,o,s={};i(793),e=i(462),o=i(911),n.exports=e||{},n.exports.__esModule&&(n.exports=n.exports.default);var h="function"==typeof n.exports?n.exports.options||(n.exports.options={}):n.exports;o&&(h.template=o),h.computed||(h.computed={}),Object.keys(s).forEach(function(n){var t=s[n];h.computed[n]=function(){return t}})}});
//# sourceMappingURL=6.js.map